#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Run lint-staged to format and lint staged files (if available)
if command -v npx >/dev/null 2>&1; then
  echo "ğŸ“ Formatting and linting staged files..."
  npx lint-staged || echo "âš ï¸  lint-staged not configured, skipping"
else
  echo "âš ï¸  npx not found, skipping lint-staged"
fi

# Run tests if test:run script exists in package.json
if grep -q '"test:run"' package.json 2>/dev/null; then
  echo "ğŸ§ª Running unit tests..."
  npm run test:run
else
  echo "âš ï¸  No test:run script found, skipping tests"
fi

echo "âœ… Pre-commit checks completed successfully!"
